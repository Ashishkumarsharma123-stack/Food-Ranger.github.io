System.register(["./vendor.js","./frameworks.js"],(function(e,t){"use strict";var n,s,o,i,r,c,a,l,u,f,d,m,g,j,h,v,L;return{setters:[function(e){n=e.a,s=e.o,o=e.c,i=e.q,r=e.b,c=e.g,a=e.r},function(e){l=e.o,u=e.G,f=e.g,d=e.K,m=e.f,g=e.n,j=e.L,h=e.M,v=e.N,L=e.r}],execute:function(){function e(e){const t=r(e,".js-gist-files"),n=document.getElementById("js-gist-file-template");if(!n)throw new Error("invariant");const s=document.createElement("div");s.innerHTML=n.textContent;for(const i of s.querySelectorAll("[id]"))i.removeAttribute("id");const o=s.querySelector(".js-code-textarea");null!=o&&o.setAttribute("id",`blob_contents_${Date.now()}`);for(const i of s.children)t.append(i);return t.lastElementChild}function p(e){return u(o(e,".js-code-editor"))}function w(e){return!(i(document,".js-must-verify-email",HTMLButtonElement).length>0)&&i(e,".js-code-textarea",HTMLTextAreaElement).some(e=>e.value.trim().length>0)}function y(){for(const e of i(document,".js-gist-create",HTMLButtonElement)){const t=e.form;e.disabled=!w(t)}}async function k(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const n=new URL(t,window.location.origin),s=new URLSearchParams(n.search.slice(1));s.append("filename",e.value),n.search=s.toString();const o=await m(n.toString());(await p(e)).setMode(o.language)}function T(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const n of t)n.classList.toggle("d-none",t.length<2)}n("change",".js-code-textarea",(function(){y()})),l(".js-gist-filename",async e=>{const t=e;if(!(t instanceof HTMLInputElement))throw new Error("invariant");const n=o(e,".js-code-editor");await p(n),f(t,k),e.addEventListener("blur",()=>d(t,k),{once:!0})}),n("click",".js-add-gist-file",(function(t){t.preventDefault(),e(o(t.currentTarget,".js-blob-form")).scrollIntoView()})),n("gist:filedrop",".js-blob-form",(async function(t){const{file:n,data:s}=t.detail,o=function(t){for(const e of t.querySelectorAll(".js-gist-file")){const t=r(e,".js-gist-filename",HTMLInputElement),n=r(e,".js-blob-contents",HTMLTextAreaElement);if(!t.value&&!n.value)return e}return e(t)}(t.currentTarget),i=r(o,".js-gist-filename",HTMLInputElement);i.value=n.name,k(i),(await p(i)).setCode(s),o.scrollIntoView()})),n("click",".js-remove-gist-file",(function(e){e.preventDefault();const t=o(e.currentTarget,".js-gist-file");for(const n of i(t,".js-gist-deleted input",HTMLInputElement))n.disabled=!1;r(t,".js-code-editor").remove()})),s(".js-gist-create",y),s(".js-remove-gist-file",(function(e){const t=o(e,".js-gist-files");return{add(){T(t)},remove(){T(t)}}})),l(".js-quicksearch-field",(function(e){h(r(e.form,".js-quicksearch-results"))})),g(".js-quicksearch-field",(async function(e){const t=e.target,n=t.value.replace(/^\s+|\s+$/g,""),s=o(t,"form"),i=r(s,".js-quicksearch-results"),a=c(i,"data-quicksearch-url");let l="";null==b||b.abort();const{signal:u}=b=new AbortController;if(n.length){const e=new URL(a,window.location.origin),t=new URLSearchParams(e.search.slice(1));t.append("q",n),e.search=t.toString(),s.classList.add("is-sending");try{const t=await fetch(e.toString(),{signal:u});t.ok&&(l=await t.text())}catch(f){}}if(u.aborted)return;l&&(i.innerHTML=l);i.classList.toggle("active",""!==n),s.classList.remove("is-sending")})),n("navigation:keydown",".js-quicksearch-results",(function(e){const t=e,n=t.target,s=o(n,"form",HTMLFormElement);if("Escape"===t.detail.hotkey){const e=r(s,".js-quicksearch-results");e.classList.remove("active"),v(e)}else"Enter"!==t.detail.hotkey||n.classList.contains("js-navigation-item")||(L(s),t.preventDefault())})),n("submit",".js-quicksearch-form",(function(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),j(t))})),n("focusout:delay",".js-quicksearch-field",(function(e){const t=o(e.currentTarget,"form",HTMLFormElement).querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),j(t))}));let b=null;a(".js-gist-file-update-container .js-comment-update",(async function(e,t){let n;try{n=await t.json()}catch(s){return}if(e.action=n.json.url,n.json.authenticity_token){r(e,"input[name=authenticity_token]",HTMLInputElement).value=n.json.authenticity_token}})),s(".js-gist-dropzone",()=>{t.import("./drag-drop.js")})}}}));
//# sourceMappingURL=gist-bootstrap-b5fca74a.js.map
